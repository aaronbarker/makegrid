/*!
* makeGrid
* @description	Dynamically creates rows/cols for grids of images/blocks responsively
* @version		1.3.0 - 2014/06/06
* @author		Aaron Barker
* @requires	ui.widget.js
* @copyright	Copyright Intellectual Reserve Inc. All rights reserved.
*/
(function(a){"use strict";a.widget("lds.makeGrid",{options:{firstClass:"first",lastClass:"last",selectorExclude:false,setupResize:function(b,c){a(window).on("resize orientationchange",function(){c.fit()})}},_create:function(){var a=this;if(document.all&&document.documentMode&&8===document.documentMode){a.options.isIE8=true}a._trigger("setupResize",0,a);a.fit()},fit:function(){var b=this.options,c=this.element,d=c.children().not(b.selectorExclude),e=b.firstClass,f=b.lastClass,g=c.data("cols")||b.maxCols,h=c.width(),i=d.eq(0),j=parseInt(i.css("margin-right"),10),k=parseInt(i.css("min-width"),10)||c.data("width")||150,l=Math.floor(h/(k+j)),m=c.offset().left+c.width(),n,o,p,q,r;if(i.css("float")==="none"){console.debug("MakeGrid: kids aren't floated");return}if(!i.outerHeight(true)){console.debug("MakeGrid: kids don't have height");return}d.removeClass(e+" "+f);if(l>g){l=g}if(c.data("fill")&&l>d.length){l=d.length}n=j*(l-1);o=h-n;p=Math.floor(o/l);q=Math.floor(p/h*1e10)/1e8;if(l==="1"){q="100%"}d.css("width",q+"%");if(l>1){d.each(function(b){if(b%l===0){a(this).addClass(e)}if(b%l===l-1){a(this).addClass(f)}})}else{d.addClass(e+" "+f)}r=d.eq(l-1);if(!b.isIE8){var s=0;while(r.length&&m-(r.offset().left+r.outerWidth(true))>10){q=q-.015625;d.css("width",q+"%");if(s>10){return}s++}}}});a.extend(a.lds.makeGrid,{version:"1.3.0"})})(jQuery);